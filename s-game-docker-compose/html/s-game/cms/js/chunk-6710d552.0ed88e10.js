(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6710d552","chunk-7019489e"],{"0e77":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-audios-container"},[a("div",{staticClass:"audio_box"},[a("el-form",[a("div",{staticClass:"drop-upload-container"},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth}},[a("el-upload",{ref:"uploadFiles",attrs:{multiple:"",drag:"",action:e.action,limit:e.limit,"auto-upload":e.autoUpload,accept:e.accept,"before-upload":e.beforeUploadFile,"on-remove":e.handleRemove,"on-change":e.fileChange,"on-exceed":e.exceedFile,"http-request":e.handleUpload,"file-list":e.fileList}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("\n                            拖拽上传文件\n                            "),a("br"),a("em",[e._v(" 支持mp3格式 大小不超过256MB")])])])],1),a("el-form-item",{staticClass:"item-container"},[a("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.submitUpload(t)}}},[e._v("上 传\n                    ")]),a("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){return e.uploadCancle(t)}}},[e._v("清 空\n                    ")])],1)],1)])],1)])},i=[],r={props:{action:{required:!0,type:String},limit:{required:!0,type:Number},autoUpload:{type:Boolean,default:!1},accept:{required:!0,type:String}},data:function(){return{formLabelWidth:"80px",userIds:sessionStorage.getItem("userid"),fileList:[],files:[]}},methods:{exceedFile:function(e,t){"".concat(this.limit),"".concat(e.length+t.length);this.$notify.warning({title:"警告",message:"只能选择 ".concat(this.limit," 个文件，当前共选择了 ").concat(e.length+t.length," 个")})},fileChange:function(e,t){},beforeUploadFile:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="mp3"===t;a||this.$message.error("仅支持mp3格式");var n=e.size/1024/1024,i=n<256;return i||a||this.$message.error("文件大小不能超过256MB"),a&&i},handleRemove:function(e,t){},handleUpload:function(e){this.files.push(e.file)},submitUpload:function(){var e=this;this.$refs.uploadFiles.submit(),this.files.length<=0&&this.$message.error("请先添加文件");var t={};return this.files.forEach(function(e,a){t["file_".concat(a)]=e}),this.$axios({method:"post",url:"/file/upload-audio",data:t}).then(function(t){if(!Array.isArray(t)||0===t.length)throw new Error("音频上传失败");e.$message.success("上传成功"),e.uploadCancle()}).catch(function(t){e.uploadCancle();var a="音频上传失败, 请重试";t.msg?a=t.msg:t.message&&(a=t.message),console.error(t),e.$message.error(a)})},uploadCancle:function(){this.$refs.uploadFiles.clearFiles()}}},o=r,s=(a("8a44"),a("2877")),l=Object(s["a"])(o,n,i,!1,null,"ae328576",null);t["default"]=l.exports},3272:function(e,t,a){"use strict";var n=a("bdfe"),i=a.n(n);i.a},"8a44":function(e,t,a){"use strict";var n=a("b6b4"),i=a.n(n);i.a},b6b4:function(e,t,a){},bdfe:function(e,t,a){},f9cb:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lin-container"},[a("div",{staticClass:"lin-title"},[e._v("音频上传")]),a("div",{staticClass:"lin-wrap"},[a("el-form",{attrs:{"label-width":"220px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上传音频，音频最大不能超过256MB，支持'mp3'格式，同时上传数量不能超过10个",placement:"top"}},[a("Span",[e._v("添加音频")])],1),a("el-form-item",[a("upload-audios",{ref:"uploadEle",attrs:{action:"action",limit:9,accept:"audio/mp3"}})],1)],1)],1)])},i=[],r=a("a34a"),o=a.n(r),s=a("0e77");function l(e,t,a,n,i,r,o){try{var s=e[r](o),l=s.value}catch(c){return void a(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function c(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function o(e){l(r,n,i,o,s,"next",e)}function s(e){l(r,n,i,o,s,"throw",e)}o(void 0)})}}var u={name:"AudiosUploadStage",components:{UploadAudios:s["default"]},data:function(){return{initData:[],rules:{maxSize:5120,allowAnimated:0}}},computed:{},watch:{},mounted:function(){},methods:{beforeFuc:function(){var e=c(o.a.mark(function e(){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$message.error("进入自定义校验函数, 并返回false终止上传"),e.abrupt("return",!1);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getValue:function(){var e=c(o.a.mark(function e(t){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=console,e.next=3,this.$refs[t].getValue();case 3:e.t1=e.sent,e.t0.log.call(e.t0,e.t1),alert("已获取数据, 打印在控制台中");case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),doClear:function(){this.$refs.uploadEle.clear()}}},d=u,f=(a("3272"),a("2877")),p=Object(f["a"])(d,n,i,!1,null,"8275efb0",null);t["default"]=p.exports}}]);