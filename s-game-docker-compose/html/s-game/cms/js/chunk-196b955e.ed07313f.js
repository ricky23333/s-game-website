(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-196b955e"],{"04e7":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"title"},[e._v("新建分组信息")]),r("el-row",[r("el-col",{attrs:{lg:16,md:20,sm:24,xs:24}},[r("div",{staticClass:"content"},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"status-icon":"",rules:e.rules,model:e.form,"label-position":"right","label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"分组名称",prop:"name"}},[r("el-input",{attrs:{size:"medium",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"分组描述",prop:"info"}},[r("el-input",{attrs:{size:"medium",clearable:""},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}})],1),r("el-form-item",[r("group-auths",{ref:"groupAuths",attrs:{title:"分配权限"},on:{updateAuths:e.updateAuths,updateAllAuths:e.updateAllAuths}})],1),r("el-form-item",{staticClass:"submit"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("保 存")]),r("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重 置")])],1)],1)],1)])],1)],1)},a=[],o=r("a34a"),s=r.n(o),i=r("4723"),u=r("1342");function l(e,t,r,n,a,o,s){try{var i=e[o](s),u=i.value}catch(l){return void r(l)}i.done?t(u):Promise.resolve(u).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function s(e){l(o,n,a,s,i,"next",e)}function i(e){l(o,n,a,s,i,"throw",e)}s(void 0)})}}var f={components:{GroupAuths:u["default"]},inject:["eventBus"],data:function(){var e=function(e,t,r){if(!t)return r(new Error("分组名称不能为空"));r()};return{allAuths:[],auths:[],form:{name:"",info:""},rules:{name:[{validator:e,trigger:["blur","change"],required:!0}],info:[]},loading:!1}},methods:{updateAuths:function(e){this.auths=e},updateAllAuths:function(e){this.allAuths=e},submitForm:function(){var e=c(s.a.mark(function e(t){var r=this;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[t].validate(function(){var e=c(s.a.mark(function e(t){var n,a;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return a=r.auths.filter(function(e){return Object.keys(r.allAuths).indexOf(e)<0}),e.prev=2,r.loading=!0,e.next=6,i["default"].createOneGroup(r.form.name,r.form.info,a,r.id);case 6:n=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),r.loading=!1,console.log(e.t0);case 13:0===n.error_code?(r.loading=!1,r.$message.success("".concat(n.msg)),r.eventBus.$emit("addGroup",!0),r.$router.push("/admin/group/list"),r.resetForm("form")):(r.loading=!1,r.$message.error("".concat(n.msg))),e.next=18;break;case 16:return r.$message.error("请将信息填写完整"),e.abrupt("return",!1);case 18:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),resetForm:function(e){this.$refs[e].resetFields(),this.$refs.groupAuths.getGroupAuths()}}},m=f,p=(r("53a8b"),r("2877")),d=Object(p["a"])(m,n,a,!1,null,"76cc56ce",null);t["default"]=d.exports},"53a8b":function(e,t,r){"use strict";var n=r("f6a1"),a=r.n(n);a.a},f6a1:function(e,t,r){}}]);