(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7019489e"],{"0e77":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-audios-container"},[a("div",{staticClass:"audio_box"},[a("el-form",[a("div",{staticClass:"drop-upload-container"},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth}},[a("el-upload",{ref:"uploadFiles",attrs:{multiple:"",drag:"",action:e.action,limit:e.limit,"auto-upload":e.autoUpload,accept:e.accept,"before-upload":e.beforeUploadFile,"on-remove":e.handleRemove,"on-change":e.fileChange,"on-exceed":e.exceedFile,"http-request":e.handleUpload,"file-list":e.fileList}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("\n                            拖拽上传文件\n                            "),a("br"),a("em",[e._v(" 支持mp3格式 大小不超过256MB")])])])],1),a("el-form-item",{staticClass:"item-container"},[a("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.submitUpload(t)}}},[e._v("上 传\n                    ")]),a("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){return e.uploadCancle(t)}}},[e._v("清 空\n                    ")])],1)],1)])],1)])},n=[],s={props:{action:{required:!0,type:String},limit:{required:!0,type:Number},autoUpload:{type:Boolean,default:!1},accept:{required:!0,type:String}},data:function(){return{formLabelWidth:"80px",userIds:sessionStorage.getItem("userid"),fileList:[],files:[]}},methods:{exceedFile:function(e,t){"".concat(this.limit),"".concat(e.length+t.length);this.$notify.warning({title:"警告",message:"只能选择 ".concat(this.limit," 个文件，当前共选择了 ").concat(e.length+t.length," 个")})},fileChange:function(e,t){},beforeUploadFile:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="mp3"===t;a||this.$message.error("仅支持mp3格式");var i=e.size/1024/1024,n=i<256;return n||a||this.$message.error("文件大小不能超过256MB"),a&&n},handleRemove:function(e,t){},handleUpload:function(e){this.files.push(e.file)},submitUpload:function(){var e=this;this.$refs.uploadFiles.submit(),this.files.length<=0&&this.$message.error("请先添加文件");var t={};return this.files.forEach(function(e,a){t["file_".concat(a)]=e}),this.$axios({method:"post",url:"/file/upload-audio",data:t}).then(function(t){if(!Array.isArray(t)||0===t.length)throw new Error("音频上传失败");e.$message.success("上传成功"),e.uploadCancle()}).catch(function(t){e.uploadCancle();var a="音频上传失败, 请重试";t.msg?a=t.msg:t.message&&(a=t.message),console.error(t),e.$message.error(a)})},uploadCancle:function(){this.$refs.uploadFiles.clearFiles()}}},l=s,o=(a("8a44"),a("2877")),r=Object(o["a"])(l,i,n,!1,null,"ae328576",null);t["default"]=r.exports},"8a44":function(e,t,a){"use strict";var i=a("b6b4"),n=a.n(i);n.a},b6b4:function(e,t,a){}}]);