(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66243e56","chunk-86ce195c","chunk-f2e52c62","chunk-2d0d65e0"],{"03cb":function(e,t,i){},"08d4":function(e,t,i){"use strict";var n=i("877d"),a=i.n(n);a.a},"0d2e":function(e,t,i){"use strict";var n=i("e143"),a=i.n(n);a.a},1105:function(e,t,i){},"158f":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tableSample"},[i("div",{staticClass:"header"},[e._m(0),i("div",{staticClass:"header-right"},[i("div",{staticClass:"search-box"},[i("lin-search",{attrs:{placeholder:"请输入关键字"},on:{query:e.onQueryChange,click:e.onSearchClick}})],1),i("div",{staticStyle:{"margin-left":"30px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogTableVisible=!e.dialogTableVisible}}},[e._v("列操作")])],1)])]),i("div",{staticClass:"table-main"},[i("el-dialog",{attrs:{top:"5vh",width:"60%",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("span",[e._v("选择要展示的列:")]),i("el-checkbox-group",{staticClass:"m-20",on:{change:e.handleChange},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.tempCheckList,function(e){return i("el-checkbox",{key:e,attrs:{disabled:"id"===e||"标题"===e,label:e}})}),1),i("span",[e._v("选择固定在左侧的列:")]),i("el-checkbox-group",{staticClass:"m-20",model:{value:e.fixedLeftList,callback:function(t){e.fixedLeftList=t},expression:"fixedLeftList"}},e._l(e.tempCheckList,function(t){return i("el-checkbox",{key:t,attrs:{disabled:e.fixedRightList.indexOf(t)>-1||-1===e.checkList.indexOf(t),label:t}})}),1),i("span",[e._v("选择固定在右侧的列:")]),i("el-checkbox-group",{staticClass:"m-20",model:{value:e.fixedRightList,callback:function(t){e.fixedRightList=t},expression:"fixedRightList"}},e._l(e.tempCheckList,function(t){return i("el-checkbox",{key:t,attrs:{disabled:e.fixedLeftList.indexOf(t)>-1||-1===e.checkList.indexOf(t),label:t}})}),1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,id:"out-table'"},on:{"row-dblclick":e.rowClick,"expand-change":e.expandChange}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"summary"},[i("img",{attrs:{src:t.row.cover_url,alt:""}}),i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"ID"}},[i("span",[e._v(e._s(t.row.id))])]),i("el-form-item",{attrs:{label:"音乐名称"}},[i("span",[e._v(e._s(t.row.audio_name))])]),i("el-form-item",{attrs:{label:"音乐url"}},[i("span",[e._v(e._s(t.row.audio_url))])]),i("el-form-item",{attrs:{label:"创建时间"}},[i("span",[e._v(e._s(t.row.create_at))])]),i("el-form-item",{attrs:{label:"更新时间"}},[i("span",[e._v(e._s(t.row.update_at))])]),i("el-form-item",{attrs:{label:"删除时间"}},[i("span",[e._v(e._s(t.row.delete_at))])])],1)],1)]}}])}),e._l(e.filterTableColumn,function(t){return[t.noRepeat?e._e():i("el-table-column",{key:t.label,attrs:{id:"table-column",prop:t.prop,label:t.label,"show-overflow-tooltip":!0,fixed:!!t.fixed&&t.fixed,width:t.width?t.width:""}}),"ID"===t.label?i("el-table-column",{key:t.label,attrs:{label:"ID",prop:t.prop,sortable:"",fixed:!!t.fixed&&t.fixed,width:t.width?t.width:""}}):e._e()]}),i("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{directives:[{name:"auth",rawName:"v-auth",value:{auth:"更新音乐",type:"disabled"},expression:"{ auth: '更新音乐', type: 'disabled'}"}],attrs:{type:"primary",size:"mini",plain:""},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                    ")]),t.row.delete_at?i("el-button",{directives:[{name:"auth",rawName:"v-auth",value:{auth:"恢复音乐",type:"disabled"},expression:"{ auth: '恢复音乐', type: 'disabled'}"}],attrs:{type:"primary",size:"mini",plain:""},on:{click:function(i){return e.handleRecover(t.row)}}},[e._v("恢复\n                    ")]):e._e(),i("el-button",{directives:[{name:"auth",rawName:"v-auth",value:{auth:"删除音乐",type:"disabled"},expression:"{ auth: '删除音乐', type: 'disabled'}"}],attrs:{type:"danger",size:"mini",plain:""},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v("删除\n                    ")])]}}])})],2),e.page_meta?i("div",{staticClass:"pagination"},[e.refreshPagination?i("el-pagination",{attrs:{background:!0,"page-size":e.page_meta.per_page_count,"current-page":e.page_meta.current_page_index,layout:"prev, pager, next, jumper",total:e.page_meta.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1):e._e()],1),[i("div",[e.dialogFormVisible?i("div",{staticClass:"dialog-container",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleClose(t)}}},[i("div",{staticClass:"dialog-box"},[e.editorAudioDate?i("audio-editor",{ref:"audioEditor",attrs:{id:"audio-editor",audioDate:e.editorAudioDate},on:{submitOnClick:e.submitAudioDate,resetOnClick:e.resetAudioDate}}):e._e(),i("div",{staticClass:"close-btn",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleClose(t)}}},[e._v("\n                        X\n                    ")])],1)]):e._e()])]],2)},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header-left"},[i("p",{staticClass:"title"},[e._v("音乐列表")])])}],r=i("a34a"),o=i.n(r),s=i("8eab"),l=i("71f6"),u=(i("2f62"),i("f290"));function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(i,!0).forEach(function(t){f(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e){return b(e)||m(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function b(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function v(e,t,i,n,a,r,o){try{var s=e[r](o),l=s.value}catch(u){return void i(u)}s.done?t(l):Promise.resolve(l).then(n,a)}function g(e){return function(){var t=this,i=arguments;return new Promise(function(n,a){var r=e.apply(t,i);function o(e){v(r,n,a,o,s,"next",e)}function s(e){v(r,n,a,o,s,"throw",e)}o(void 0)})}}var w={components:{LinSearch:s["default"],AudioEditor:u["default"]},data:function(){return{tableData:[],loading:!1,Hidden:!0,searchKeyword:"",checkList:[],filterTableColumn:[],refreshPagination:!0,page_meta:{current_page_index:1,per_page_count:12,total:0,total_page_count:0},dialogTableVisible:!1,fixedLeftList:[],fixedRightList:[],value:"",editRow:0,showTooltip:!0,dialogFormVisible:!1,editorAudioDate:null,editorAudioIndex:0,tableColumn:[{prop:"id",label:"ID",width:75,noRepeat:!0},{prop:"audio_name",label:"音乐名称",width:100},{prop:"audio_url",label:"音乐url",width:150},{prop:"cover_url",label:"封面url",width:150},{prop:"create_at",label:"创建时间",width:85},{prop:"update_at",label:"更新时间",width:85},{prop:"delete_at",label:"删除时间",width:85}]}},computed:{},created:function(){var e=this;this._getTableData(),this.tempCheckList=this.tableColumn.map(function(e){return e.label}).slice(),this.checkList=this.tableColumn.map(function(e){return e.label}),this.filterTableColumn=this.tableColumn.filter(function(t){return e.checkList.indexOf(t.label)>-1})},methods:{_getTableData:function(){var e=g(o.a.mark(function e(){var t;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,l["default"].getAudios({page:this.page_meta.current_page_index,keyword:this.searchKeyword});case 4:t=e.sent,t.page_meta&&(this.page_meta=t.page_meta),t.map(function(e){var t=e;return t.editFlag=!1,""}),this.tableData=p(t),this.loading=!1,e.next=16;break;case 11:e.prev=11,e.t0=e["catch"](0),this.loading=!1,this.$message.error(e.t0.data.msg),console.log(e.t0);case 16:case"end":return e.stop()}},e,this,[[0,11]])}));function t(){return e.apply(this,arguments)}return t}(),rowClick:function(e){},handleChange:function(){var e=this;this.filterTableColumn=this.tableColumn.filter(function(t){return e.checkList.indexOf(t.label)>-1})},showRowOperateModal:function(){},expandChange:function(e,t){},handleCurrentChange:function(){var e=g(o.a.mark(function e(t){var i=this;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.page_meta.current_page_index=t,this.loading=!0,setTimeout(function(){i._getTableData()},1e3);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),onQueryChange:function(e){this.searchKeyword=e.trim()},onSearchClick:function(){var e=g(o.a.mark(function e(){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._getTableData();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleEdit:function(e,t){t&&(this.editorAudioIndex=e,this.editorAudioDate=d({},t),this.dialogFormVisible=!0)},handleDelete:function(){var e=g(o.a.mark(function e(t){var i=this;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("此操作将删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(g(o.a.mark(function e(){var n;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i.loading=!0,e.next=3,l["default"].deleteAudio(t.id);case 3:n=e.sent,console.log(n),0===n.error_code&&(i.dialogFormVisible=!1,i.editorAudioDate=null,i.editorAudioIndex=0,i.$message.success("".concat(n.msg)),setTimeout(function(){i._getTableData()},1e3));case 6:case"end":return e.stop()}},e)}))).catch(function(e){i.dialogFormVisible=!1,i.editorAudioDate=null,i.editorAudioIndex=0,i.loading=!1,e.data&&e.data.msg&&i.$message.error(e.data.msg),console.log(e)});case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleRecover:function(){var e=g(o.a.mark(function e(t){var i=this;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("此操作将恢复并在网页上显示该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(g(o.a.mark(function e(){var n,a;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i.loading=!0,n=t.id,e.next=4,l["default"].recoverAudio({id:n});case 4:a=e.sent,0===a.error_code&&(i.$message.success("".concat(a.msg)),setTimeout(function(){i._getTableData()},1e3));case 6:case"end":return e.stop()}},e)}))).catch(function(e){i.loading=!1,e.data&&e.data.msg&&i.$message.error(e.data.msg),console.log(e)});case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleClose:function(){this.dialogFormVisible=!1,this.editorAudioDate=null,this.editorAudioIndex=0},submitAudioDate:function(){var e=g(o.a.mark(function e(){var t,i=this;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,l["default"].editAudio(this.editorAudioDate.id,this.editorAudioDate);case 4:t=e.sent,0===t.error_code&&(this.dialogFormVisible=!1,this.editorAudioDate=null,this.editorAudioIndex=0,this.$message.success("".concat(t.msg)),setTimeout(function(){i._getTableData()},1e3)),this.loading=!1,e.next=17;break;case 9:e.prev=9,e.t0=e["catch"](0),this.dialogFormVisible=!1,this.editorAudioDate=null,this.editorAudioIndex=0,this.loading=!1,this.$message.error("提交数据失败"),console.log(e.t0);case 17:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}(),resetAudioDate:function(){var e=this.tableData[this.editorAudioIndex];this.editorAudioDate=d({},e)}},watch:{fixedLeftList:function(){var e=this;this.filterTableColumn.map(function(t,i){return e.fixedLeftList.indexOf(t.label)>-1?e.$set(e.filterTableColumn[i],"fixed","left"):-1===e.fixedRightList.indexOf(t.label)&&e.$set(e.filterTableColumn[i],"fixed",!1),""})},fixedRightList:function(){var e=this;this.filterTableColumn.map(function(t,i){return e.fixedRightList.indexOf(t.label)>-1?e.$set(e.filterTableColumn[i],"fixed","right"):-1===e.fixedLeftList.indexOf(t.label)&&e.$set(e.filterTableColumn[i],"fixed",!1),""})}}},x=w,_=(i("305b"),i("0d2e"),i("2877")),k=Object(_["a"])(x,n,a,!1,null,"ec676006",null);t["default"]=k.exports},"305b":function(e,t,i){"use strict";var n=i("d7a2"),a=i.n(n);a.a},"3fb55":function(e,t,i){"use strict";var n=i("1105"),a=i.n(n);a.a},"71f6":function(e,t,i){"use strict";i.r(t);var n=i("a34a"),a=i.n(n),r=i("dfd8");function o(e,t,i,n,a,r,o){try{var s=e[r](o),l=s.value}catch(u){return void i(u)}s.done?t(l):Promise.resolve(l).then(n,a)}function s(e){return function(){var t=this,i=arguments;return new Promise(function(n,a){var r=e.apply(t,i);function s(e){o(r,n,a,s,l,"next",e)}function l(e){o(r,n,a,s,l,"throw",e)}s(void 0)})}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e}var d=function(){function e(){l(this,e)}return c(e,[{key:"addAudio",value:function(){var e=s(a.a.mark(function e(t){var i;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["post"])("audio",t,{handleError:!0});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAudio",value:function(){var e=s(a.a.mark(function e(t){var i;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["get"])("audio/".concat(t));case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAudios",value:function(){var e=s(a.a.mark(function e(t){var i;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["get"])("audio",t,{handleError:!0});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"editAudio",value:function(){var e=s(a.a.mark(function e(t,i){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["put"])("audio/".concat(t),i);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"recoverAudio",value:function(){var e=s(a.a.mark(function e(t){var i;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["put"])("audio/recover",t);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteAudio",value:function(){var e=s(a.a.mark(function e(t){var i;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["_delete"])("audio/".concat(t));case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=new d},"877d":function(e,t,i){},"8eab":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"lin-search"},[i("el-input",{staticClass:"input-with-select",attrs:{size:"medium",placeholder:e.placeholder,clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleClick},slot:"append"})],1)],1)},a=[],r=i("306b"),o={props:{placeholder:{type:String,default:"请输入内容"}},data:function(){return{keyword:""}},created:function(){var e=this;this.$watch("keyword",r["default"].debounce(function(t){e.$emit("query",t)},1e3))},methods:{clear:function(){this.keyword=""},handleClick:function(){this.$emit("click")}}},s=o,l=(i("3fb55"),i("2877")),u=Object(l["a"])(s,n,a,!1,null,"58a2f5b2",null);t["default"]=u.exports},b1b3:function(e,t,i){"use strict";var n=i("03cb"),a=i.n(n);a.a},d7a2:function(e,t,i){},e143:function(e,t,i){},f290:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"wrap"},[i("el-row",[i("el-col",{attrs:{lg:16,md:20,sm:24,xs:24}},[i("el-form",{ref:"audioDate",attrs:{model:e.audioDate,"status-icon":"","label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{id:"audio-first-container"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"音乐名称，不填则显示url文件名",placement:"top"}},[i("Span",[e._v("音乐名称")])],1),i("el-input",{attrs:{size:"medium",placeholder:"请填写音乐名称"},model:{value:e.audioDate.audio_name,callback:function(t){e.$set(e.audioDate,"audio_name",t)},expression:"audioDate.audio_name"}})],1),i("el-form-item",{attrs:{id:"audio-second-container"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"音乐url",placement:"top"}},[i("Span",[e._v("音乐url")])],1),i("el-input",{attrs:{size:"medium",placeholder:"请填写音乐url"},model:{value:e.audioDate.audio_url,callback:function(t){e.$set(e.audioDate,"audio_url",t)},expression:"audioDate.audio_url"}})],1),i("el-form-item",{attrs:{id:"audio-third-container"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"音乐url",placement:"top"}},[i("Span",[e._v("封面url")])],1),i("el-input",{attrs:{size:"medium",placeholder:"请填写封面url"},model:{value:e.audioDate.cover_url,callback:function(t){e.$set(e.audioDate,"cover_url",t)},expression:"audioDate.cover_url"}})],1),i("el-form-item",{staticClass:"submit"},[i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.submitVisible,callback:function(t){e.submitVisible=t},expression:"submitVisible"}},[i("p",[e._v("确定保存到服务器吗？")]),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.submitVisible=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.submitVisible=!1,e.submitForm()}}},[e._v("确定\n                                ")])],1),i("el-button",{attrs:{slot:"reference",id:"submitBtn"},slot:"reference"},[e._v("保 存")])],1),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.resetVisible,callback:function(t){e.resetVisible=t},expression:"resetVisible"}},[i("p",[e._v("确定重置已编辑内容吗？")]),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.resetVisible=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.resetVisible=!1,e.resetForm()}}},[e._v("确定\n                                ")])],1),i("el-button",{attrs:{slot:"reference",id:"resetBtn"},slot:"reference"},[e._v("重 置")])],1)],1)],1)],1)],1)],1)])},a=[],r=(i("71f6"),{components:{},created:function(){},mounted:function(){},props:{audioDate:{}},data:function(){return{submitVisible:!1,resetVisible:!1}},methods:{submitForm:function(){this.$emit("submitOnClick")},resetForm:function(){this.$emit("resetOnClick")}}}),o=r,s=(i("b1b3"),i("08d4"),i("2877")),l=Object(s["a"])(o,n,a,!1,null,"538a501c",null);t["default"]=l.exports}}]);